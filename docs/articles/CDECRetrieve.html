<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • CDECRetrieve</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Getting Started">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">CDECRetrieve</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/CDECRetrieve.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Introduction_to_CDECRetrieve.html">CDEC Retrieve is now part of CRAN!</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="CDECRetrieve_files/htmlwidgets-1.0/htmlwidgets.js"></script><script src="CDECRetrieve_files/jquery-1.12.4/jquery.min.js"></script><link href="CDECRetrieve_files/leaflet-0.7.7/leaflet.css" rel="stylesheet">
<script src="CDECRetrieve_files/leaflet-0.7.7/leaflet.js"></script><link href="CDECRetrieve_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<link href="CDECRetrieve_files/leaflet-label-0.2.2/leaflet.label.css" rel="stylesheet">
<script src="CDECRetrieve_files/leaflet-label-0.2.2/leaflet.label.js"></script><script src="CDECRetrieve_files/Proj4Leaflet-0.7.2/proj4-compressed.js"></script><script src="CDECRetrieve_files/Proj4Leaflet-0.7.2/proj4leaflet.js"></script><script src="CDECRetrieve_files/leaflet-binding-1.1.0/leaflet.js"></script><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Getting Started</h1>
                        <h4 class="author">Emanuel Rodriguez</h4>
            
            <h4 class="date">2018-03-30</h4>
          </div>

    
    
<div class="contents">
<div id="install" class="section level1">
<h1 class="hasAnchor">
<a href="#install" class="anchor"></a>Install</h1>
<p>You can install CDECRetrieve the usual way,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># for stable version</span>
<span class="kw">install.packages</span>(<span class="st">"CDECRetrieve"</span>)

<span class="co"># for development version</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"flowwest/CDECRetrieve"</span>)</code></pre></div>
</div>
<div id="intro" class="section level1">
<h1 class="hasAnchor">
<a href="#intro" class="anchor"></a>Intro</h1>
<p>The goal for CDECRetrieve is to create a workflow for R users using CDEC data, we believe that a well defined workflow is easier to automate and less prone to error (or easier to catch errors). In order to do this we create “services” out of different endpoints available through the CDEC site. A lot ideas in developing the package came from using <code>dataRetrieval</code> from USGS and the NOAA CDO api.</p>
</div>
<div id="exploring-locations" class="section level1">
<h1 class="hasAnchor">
<a href="#exploring-locations" class="anchor"></a>Exploring Locations</h1>
<p>We start by first exploring locations of interest. The CDEC site provides a web form with a lot of options,</p>
<div class="figure">
<img src="cdec-station-search.png" alt="cdec station search"><p class="caption">cdec station search</p>
</div>
<p>The pakcage exposes this functionallity through <code><a href="../reference/cdec_stations.html">cdec_stations()</a></code>. Although it doesn’t (currently) map all options in the web form it does so for the most used, namely, station id, nearby city, river basin, hydro area and county.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(CDECRetrieve)

<span class="kw"><a href="../reference/cdec_stations.html">cdec_stations</a></span>(<span class="dt">station_id =</span> <span class="st">"kwk"</span>) <span class="co"># get metadata for Keswick Dam</span>
<span class="co">#&gt; # A tibble: 1 x 9</span>
<span class="co">#&gt;   station_id name          river_basin county longitude latitude elevation</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;    </span>
<span class="co">#&gt; 1 kwk        sacramento r… sacramento… shasta      -122     40.6 596 &amp;nbsp</span>
<span class="co">#&gt; # ... with 2 more variables: operator &lt;chr&gt;, state &lt;chr&gt;</span>

<span class="co"># show all locations near san francisco</span>
<span class="kw"><a href="../reference/cdec_stations.html">cdec_stations</a></span>(<span class="dt">nearby_city =</span> <span class="st">"san francisco"</span>)
<span class="co">#&gt; # A tibble: 3 x 9</span>
<span class="co">#&gt;   station_id name        river_basin county   longitude latitude elevation</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;    </span>
<span class="co">#&gt; 1 sfn        san franci… sf bay      san fra…      -122     37.8 150 &amp;nbsp</span>
<span class="co">#&gt; 2 cx2        daily x2 c… sf bay      san fra…      -122     37.8 0 &amp;nbsp  </span>
<span class="co">#&gt; 3 ggt        golden gate sf bay      san fra…      -122     37.8 0 &amp;nbsp  </span>
<span class="co">#&gt; # ... with 2 more variables: operator &lt;chr&gt;, state &lt;chr&gt;</span>

<span class="co"># show all location in the sf bay river basin</span>
<span class="kw"><a href="../reference/cdec_stations.html">cdec_stations</a></span>(<span class="dt">river_basin =</span> <span class="st">"sf bay"</span>)
<span class="co">#&gt; # A tibble: 25 x 9</span>
<span class="co">#&gt;    station_id name        river_basin county  longitude latitude elevation</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;    </span>
<span class="co">#&gt;  1 mrh        marsh cree… sf bay      contra…     - 122     37.9 740 &amp;nbsp</span>
<span class="co">#&gt;  2 sfn        san franci… sf bay      san fr…     - 122     37.8 150 &amp;nbsp</span>
<span class="co">#&gt;  3 lsm        los medonos sf bay      contra…     - 122     38.0 130 &amp;nbsp</span>
<span class="co">#&gt;  4 dvb        danville l… sf bay      contra…     - 122     37.8 364 &amp;nbsp</span>
<span class="co">#&gt;  5 snn        san andreas sf bay      san ma…     - 122     37.6 456 &amp;nbsp</span>
<span class="co">#&gt;  6 umn        mt. umunhu… sf bay      santa …     - 122     37.2 3090 &amp;nb…</span>
<span class="co">#&gt;  7 rhl        richmond c… sf bay      contra…     - 122     37.9 55 &amp;nbsp </span>
<span class="co">#&gt;  8 mas        main ave d… sf bay      santa …     -1000    100.0 9999     </span>
<span class="co">#&gt;  9 cx2        daily x2 c… sf bay      san fr…     - 122     37.8 0 &amp;nbsp  </span>
<span class="co">#&gt; 10 ccp        concord pa… sf bay      contra…     - 122     38.0 558 &amp;nbsp</span>
<span class="co">#&gt; # ... with 15 more rows, and 2 more variables: operator &lt;chr&gt;, state &lt;chr&gt;</span>

<span class="co"># show all station in Tehama county</span>
<span class="kw"><a href="../reference/cdec_stations.html">cdec_stations</a></span>(<span class="dt">county =</span> <span class="st">"tehama"</span>)
<span class="co">#&gt; # A tibble: 45 x 9</span>
<span class="co">#&gt;    station_id name         river_basin county longitude latitude elevation</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;    </span>
<span class="co">#&gt;  1 teh        sacramento … sacramento… tehama      -122     40.0 213 &amp;nbsp</span>
<span class="co">#&gt;  2 crg        corning air… sacramento… tehama      -122     39.9 294 &amp;nbsp</span>
<span class="co">#&gt;  3 sbb        sacramento … sacto vly … tehama      -122     40.3 186 &amp;nbsp</span>
<span class="co">#&gt;  4 btw        nf battle c… sacramento… tehama      -122     40.4 1200 &amp;nb…</span>
<span class="co">#&gt;  5 lgs        log spring   sacto vly … tehama      -123     39.8 5100 &amp;nb…</span>
<span class="co">#&gt;  6 atp        anthony peak stony cr    tehama      -123     39.8 6200 &amp;nb…</span>
<span class="co">#&gt;  7 bnd        sacramento … sacramento… tehama      -122     40.3 286 &amp;nbsp</span>
<span class="co">#&gt;  8 dvr        davis ranch  cottonwood… tehama      -122     40.4 550 &amp;nbsp</span>
<span class="co">#&gt;  9 sh1        sheet iron … sacramento… tehama      -123     39.5 6500 &amp;nb…</span>
<span class="co">#&gt; 10 bas        south fork … sacramento… tehama      -122     40.4 997 &amp;nbsp</span>
<span class="co">#&gt; # ... with 35 more rows, and 2 more variables: operator &lt;chr&gt;, state &lt;chr&gt;</span></code></pre></div>
<p>Since we are simply exploring for locations of interest, it may be useful to map these for visual inspection. CDECRetrieve provides a simple function to do exactly this <code><a href="../reference/map_stations.html">map_stations()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magrittr)
<span class="kw">library</span>(leaflet)

<span class="kw"><a href="../reference/cdec_stations.html">cdec_stations</a></span>(<span class="dt">county =</span> <span class="st">"tehama"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../reference/map_stations.html">map_stations</a></span>(<span class="dt">label =</span> <span class="op">~</span>station_id)
<span class="co">#&gt; Assuming 'longitude' and 'latitude' are longitude and latitude, respectively</span></code></pre></div>
<div id="htmlwidget-24676a68b9d96b5aa48a" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-24676a68b9d96b5aa48a">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[40.02876,39.939,40.289,40.4204,39.833,39.842,40.28849,40.35,39.4917,40.4058,40.26469,40.152,40.3172,40.317,39.8186,39.8083,40.42433,39.90874,39.808,40.02377,40.348,40.333,40.387,39.96362,40.35,40.01405,39.81,40.0095,40.179,99.999,40.167,40.0546,40.35,39.815,39.8139,40.40251,39.90874,39.88784,40.15436,40.417,39.858,40.3871,40.35,40.04006,40.39821],[-122.11798,-122.17,-122.186,-121.96123,-122.783,-122.95,-122.18666,-122.45,-122.7339,-121.98067,-121.45106,-122.254,-122.1897,-122.881,-122.3239,-122.3292,-121.98695,-122.09247,-122.329,-122.51195,-121.609,-121.75,-122.239,-122.03436,-121.6,-121.94832,-122.3292,-121.95719,-122.229,-999.999,-122.8,-122.02415,-121.6,-122.3322,-122.3367,-121.96908,-122.09247,-122.52856,-122.20195,-122.193,-122.612,-122.23861,-121.7,-122.10463,-122.14639],10,null,null,{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"dashArray":null},null,null,null,null,["teh","crg","sbb","btw","lgs","atp","bnd","dvr","sh1","bas","dch","rbf","jlf","ctn","bbq","blw","bnf","vin","blb","ecp","min","btr","cot","dvd","mim","dcv","sdv","did","rdf","psk","sad","mlm","mnr","bbg","bbp","btb","vno","tho","rdb","bsf","tck","cwa","las","mch","bat"],null,null]}],"limits":{"lat":[39.4917,99.999],"lng":[-999.999,-121.45106]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#install">Install</a></li>
      <li><a href="#intro">Intro</a></li>
      <li><a href="#exploring-locations">Exploring Locations</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Emanuel Rodriguez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
